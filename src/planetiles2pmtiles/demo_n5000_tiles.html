<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>PMTiles Light Grey Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <script src="https://unpkg.com/maplibre-gl/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl/dist/maplibre-gl.css" rel="stylesheet" />
    
    <script src="https://unpkg.com/pmtiles/dist/pmtiles.js"></script>
    
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
    </style>
</head>
<body>

<div id="map"></div>

<script>
    // 1. Initialize the PMTiles protocol
    // This allows MapLibre to understand "pmtiles://..." URLs
    let protocol = new pmtiles.Protocol();
    maplibregl.addProtocol("pmtiles", protocol.tile);

    // 2. Define the Carto Positron-inspired Style
    const mapStyle = {
        version: 8,
        name: "N5000 Positron Light",
        sources: {
            "n5000-source": {
                type: "vector",
                // *** IMPORTANT: Change this to the path of your PMTiles file ***
                url: "pmtiles://http://127.0.0.1:8080/data/n5000_dynamic.pmtiles", 
                attribution: '<a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'
            }
        },
        layers: [
            {
                // Map background (acts as the "water" or base color)
                id: "background",
                type: "background",
                paint: {
                    "background-color": "#f2f4f6" // Very light blue-grey
                }
            },
            {
                // Land fill from your Arealdekke layer
                id: "land-fill",
                type: "fill",
                source: "n5000-source",
                "source-layer": "N5000_Arealdekke_omrade",
                paint: {
                    "fill-color": "#f9f9f9" // Almost white, slightly off-white
                }
            },
            {
                // Restriction areas (styled as a subtle dashed outline)
                id: "restrictions-outline",
                type: "line",
                source: "n5000-source",
                "source-layer": "N5000_Restriksjonsområder_omrade",
                paint: {
                    "line-color": "#d9d9d9",
                    "line-dasharray": [4, 2],
                    "line-width": 1,
                    "line-opacity": 0.8
                }
            },
            {
                // Transportation lines (roads)
                id: "transportation",
                type: "line",
                source: "n5000-source",
                "source-layer": "N5000_Samferdsel_senterlinje",
                layout: {
                    "line-join": "round",
                    "line-cap": "round"
                },
                paint: {
                    "line-color": "#cccccc", // Light grey
                    "line-width": [ // Thin lines, slightly wider on zoom
                        "interpolate", ["linear"], ["zoom"],
                        10, 0.5,
                        16, 2
                    ]
                }
            },
            {
                // Admin boundaries (dashed)
                id: "admin-boundaries",
                type: "line",
                source: "n5000-source",
                "source-layer": "N5000_AdministrativeOmråder_omrade",
                paint: {
                    "line-color": "#bbbbbb", // Slightly darker grey
                    "line-dasharray": [3, 3],
                    "line-width": 1
                }
            }
        ]
    };

    // 3. Initialize the Map
    const map = new maplibregl.Map({
        container: "map",
        style: mapStyle,
        center: [10.75, 59.91], // Centered on Oslo (adjust as needed)
        zoom: 9 // Adjust zoom as needed
    });

    // Add navigation controls
    map.addControl(new maplibregl.NavigationControl());

</script>

</body>
</html>